humhub.module("calendar.participants.List",function(n,t,e){const s=t("ui.widget").Widget,a=t("ui.loader"),i=t("client"),o=t("ui.status");t=s.extend();t.prototype.update=function(t){const e=t.$trigger.parent(),s=t.$trigger.parent().html(),r={entryId:this.data("entry-id"),userId:t.$trigger.closest("li").data("user-id"),status:t.$trigger.val()};a.set(e,{size:"10px",css:{padding:"0px"}}),i.post(this.data("update-url"),{data:r}).then(function(t){t.success&&(o.success(t.message),a.remove(e),e.html(s).find("select").val(r.status))}).catch(function(t){n.log.error(t,!0)}).finally(function(){t.finish()})},t.prototype.remove=function(t){const e=t.$trigger.closest("li");var s={entryId:this.data("entry-id"),userId:e.data("user-id")};i.post(this.data("remove-url"),{data:s}).then(function(t){t.success?(o.success(t.message),e.remove()):o.error(t.message)}).catch(function(t){n.log.error(t,!0)}).finally(function(){t.finish()})},t.prototype.displayAddForm=function(t){e("#calendar-entry-add-participants-form").show(),t.$trigger.hide()},t.prototype.add=function(t){const e=t.$trigger.closest("li");var s={entryId:this.data("entry-id"),status:e.find("select[name=status]").val(),guids:e.find('select[name="newParticipants[]"]').val()};i.post(this.data("add-url"),{data:s}).then(function(t){t.success?(o.success(t.success),e.before(t.html)):t.warning?o.warn(t.warning):t.error&&o.error(t.error)}).catch(function(t){n.log.error(t,!0)}).finally(function(){t.finish()})},n.export=t});