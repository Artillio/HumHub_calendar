humhub.module("calendar.participants.List",function(i,t,e){const n=t("ui.widget").Widget,r=t("ui.loader"),a=t("client"),o=t("ui.status");t=n.extend();t.prototype.update=function(t){const e=t.$trigger.parent(),s=t.$trigger.parent().html(),n={entryId:this.data("entry-id"),userId:t.$trigger.closest("li").data("user-id"),status:t.$trigger.val()};r.set(e,{size:"10px",css:{padding:"0px"}}),a.post(this.data("update-url"),{data:n}).then(function(t){t.success&&(o.success(t.message),r.remove(e),e.html(s).find("select").val(n.status))}).catch(function(t){i.log.error(t,!0)}).finally(function(){t.finish()})},t.prototype.remove=function(t){const e=t.$trigger.closest("li");var s={entryId:this.data("entry-id"),userId:e.data("user-id")};a.post(this.data("remove-url"),{data:s}).then(function(t){t.success?(o.success(t.message),e.remove()):o.error(t.message)}).catch(function(t){i.log.error(t,!0)}).finally(function(){t.finish()})},t.prototype.displayAddForm=function(e){const s=this.$.find("ul.media-list");a.get(e).then(function(t){s.append(t.html),n.closest(s.find("[data-ui-init]")),e.$trigger.remove()}).catch(function(t){i.log.error(t,!0)}).finally(function(){e.finish()})},t.prototype.add=function(t){const e=t.$trigger.closest("li");var s={entryId:this.data("entry-id"),status:e.find("select[name=status]").val(),guids:e.find('select[name="newParticipants[]"]').val()};a.post(this.data("add-url"),{data:s}).then(function(t){t.success?(o.success(t.success),e.before(t.html)):t.warning?o.warn(t.warning):t.error&&o.error(t.error)}).catch(function(t){i.log.error(t,!0)}).finally(function(){t.finish()})},i.export=t});